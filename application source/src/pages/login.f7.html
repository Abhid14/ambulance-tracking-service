<template>
  <!-- Login Screen -->
  <div class="page" data-name="login">
    <div class="swiper-container login-container swiper-init demo-swiper">
      <div class="swiper-wrapper">
        <div class="swiper-slide appIntro">
          <div class="appstatcont">
            <img class="appstatus" src="../static/icons/logo-256.png" />
          </div>

          <h1
            class="h-msg align-self-center text-align-center"
            style="font-size: 2.1rem"
          >
            Ambulance Tracker
          </h1>
          <p class="p-msg text-align-center" style="font-size: 1.5rem">
            An application to track Ambulance location in realtime.
          </p>
          <div class="text-align-center" style="text-align: center">
            <button
              class="text-align-center button bgetstarted button-large button-raised button-fill"
              style="display: inline; width: auto; font-size: large"
              @click="${a}"
            >
              Get started
            </button>
          </div>
        </div>
        <div class="swiper-slide appchooseDept">
          <h1
            class="h-msg align-self-center text-align-center"
            style="font-size: 2.1rem; margin-top: 5vh"
          >
            Choose Department
          </h1>
          <div @click="${bA}" class="appchooseDept">
            <h1 style="font-size: 1.8rem">Ambulance</h1>
            <img
              style="height: 150px; width: 150px"
              src="../static/icons/logo-256.png"
            />
          </div>
          <div @click="${bP}" class="appchooseDept">
            <h1 style="font-size: 1.8rem">Police</h1>
            <img
              style="height: 150px; width: 150px; border-radius: 50%"
              src="../static/icons/police.jpg"
            />
          </div>
        </div>
        <div class="swiper-slide appLogin">
          <div class="appchooseDept">
            <h1 style="font-size: 3rem; margin-top: 15vh">Welcome Back</h1>
            <div id="deptImage"></div>
          </div>
          <form class="list no-hairlines-md" id="login-form">
            <ul>
              <li>
                <div class="item-content item-input item-input-outline">
                  <div class="item-inner">
                    <div class="item-title item-floating-label">E-mail</div>
                    <div class="item-input-wrap">
                      <input
                        type="email"
                        required
                        validate
                        name="email"
                        placeholder="Enter your E-mail ID"
                      />
                      <span class="input-clear-button"></span>
                    </div>
                  </div>
                </div>
              </li>
              <li>
                <div class="item-content item-input item-input-outline">
                  <div class="item-inner">
                    <div class="item-title item-floating-label">
                      Enter your password
                    </div>
                    <div class="item-input-wrap">
                      <input
                        type="password"
                        required
                        validate
                        name="password"
                      />
                    </div>
                  </div>
                </div>
              </li>
              <input type="reset" style="display: none" id="resetuserform" />
            </ul>
          </form>
          <div class="text-align-center" style="text-align: center">
            <button
              @click="${load}"
              class="button-preloader ${isLoading ? 'button-loading' : ''} text-align-center button button-large button-raised button-fill"
              style="display: inline; width: 200px"
            >
              <span class="preloader"></span>
              <span style="font-size: x-large">Login</span>
            </button>
            <a
              data-transition="f7-circle"
              class="display-none"
              href="/ambulance/"
              data-view="current"
              id="amb"
            ></a>
            <a
              data-transition="f7-circle"
              class="display-none"
              href="/police/"
              data-view="current"
              id="pol"
            ></a>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
<script>
  export default (props, { $update }) => {
    const a = () => {
      globalThis.swiper = document.querySelector(".swiper-container").swiper;
      swiper.allowTouchMove = false;
      // Now you can use all slider methods like
      swiper.slideNext();
    };
    const bA = () => {
      //alert("Ambulance");
      document.getElementById("deptImage").innerHTML =
        "<img class='appstatusf' style='height: 150px; width: 150px; border-radius: 50%' src = '../static/icons/logo-256.png' />";
      swiper.slideNext();
      globalThis.userDept = "amb";
    };
    const bP = () => {
      //alert("Police");
      document.getElementById("deptImage").innerHTML =
        "<img class='appstatusf' style='height: 150px; width: 150px; border-radius: 50%' src = '../static/icons/police.jpg' />";
      swiper.slideNext();
      globalThis.userDept = "pol";
    };
    let isLoading = false;
    const load = () => {
      isLoading = true;
      $update();
      //alert(1);
      //isLoading = false
      //$update()
      setTimeout(() => {
        document.getElementById(userDept).click();
      }, 1000);
    };
    return $render;
  };
</script>
